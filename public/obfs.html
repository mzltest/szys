<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hello, world!</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />
  <link rel="icon" href="favicon.png">
</head>
<body>
  <h1>Hello, world!</h1>
 
    <label for="message" id="len">Message:</label><br>
    <textarea name="message" id="msg"></textarea><br>
    <input type="submit" value="Submit" onclick="obfs(document.getElementById('msg').value)">
  
<script>
function obfs(text){
result=''
line=[]
parts=text.split('\n')
for (part in parts){
for(i of parts[part]){
if(Math.random()<0.5){
line.push(i)
}
else{
line.push(i)
line.push('\u200B')
}
}
line=line.reverse().join('')

result+='\u202E'+line
if((part+1)<parts.length){result+='\n'}
line=[]
}
result+='\u202C'
document.getElementById('msg').value=result
document.getElementById('len').innerText=result.length
console.log(result.split(''))

}
</script>
</body>
</html>
